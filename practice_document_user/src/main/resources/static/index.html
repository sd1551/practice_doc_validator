<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Пользователи</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body id="home-page">
<h1>Пользователи</h1>
<button onclick="location.href='/addUser.html'">Добавить пользователя</button>
<table id="usersTable">
    <thead>
    <tr>
        <th>ID</th>
        <th>Логин</th>
        <th>Документы</th>
    </tr>
    </thead>
    <tbody id="usersTableBody">
    </tbody>
</table>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const addUserButton = document.querySelector('button[onclick*="addUser.html"]');
        if (addUserButton) {
            addUserButton.addEventListener('click', () => {
                addUserButton.style.transform = 'scale(0.95)';
                setTimeout(() => addUserButton.style.transform = 'scale(1)', 150);
            });
        }

        const uploadButtons = document.querySelectorAll('button[onclick*="uploadDocument.html"]');
        uploadButtons.forEach(button => {
            button.addEventListener('click', () => {
                button.style.transform = 'scale(0.95)';
                setTimeout(() => button.style.transform = 'scale(1)', 150);
            });
        });
    });
</script>
<script>
        fetch('/users')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('usersTableBody');
                data.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${user.userId}</td>
                        <td>${user.login}</td>
                        <td>${user.documents.map(doc => `
                            <div>ID документа: ${doc.documentId}, Тип документа: ${doc.documentType}, Валидация: ${doc.validationResult}</div>
                        `).join('')}</td>
                        <td><button onclick="location.href='/uploadDocument.html?userId=${user.userId}'">Загрузить документ</button></td>
                    `;
                    tableBody.appendChild(row);
                });
            });
    </script>
</body>
</html>
