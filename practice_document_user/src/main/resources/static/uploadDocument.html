<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Загрузка документа</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body id="upload_page">
<h1>Загрузка документа</h1>
<form id="uploadForm" enctype="multipart/form-data">
  <label for="file">Выбрать документ:</label>
  <input type="file" id="file" name="file" required>
  <input type="hidden" id="userId" name="userId">
  <button type="submit">Загрузить</button>
</form>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const addUserButton = document.querySelector('button[onclick*="addUser.html"]');
        if (addUserButton) {
            addUserButton.addEventListener('click', () => {
                addUserButton.style.transform = 'scale(0.95)';
                setTimeout(() => addUserButton.style.transform = 'scale(1)', 150);
            });
        }

        const uploadButtons = document.querySelectorAll('button[onclick*="uploadDocument.html"]');
        uploadButtons.forEach(button => {
            button.addEventListener('click', () => {
                button.style.transform = 'scale(0.95)';
                setTimeout(() => button.style.transform = 'scale(1)', 150);
            });
        });
    });
</script>
<script>
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('userId');
        document.getElementById('userId').value = userId;

        document.getElementById('uploadForm').onsubmit = function (e) {
            e.preventDefault();

            const formData = new FormData();
            formData.append('file', document.getElementById('file').files[0]);

            fetch(`/users/${userId}/doc`, {
                method: 'POST',
                body: formData
            }).then(response => {
                if (response.ok) {
                    alert('Документ успешно добавлен');
                } else {
                    alert('Ошибка добавления документа');
                }
            });
        };
    </script>
</body>
</html>